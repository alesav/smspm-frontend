---
// Footer Component
interface Props {
    lang?: string;
}

const { lang: propLang } = Astro.props;
const { pathname } = Astro.url;

// Detect language from prop (for SSR pages) or path, default to 'en'
const langMatch = pathname.match(/^\/([a-z]{2})(\/|$)/);
const detectedFromPath = langMatch ? langMatch[1] : null;
const lang = (propLang || detectedFromPath || "en") as keyof typeof translations;

// Define localized paths - ALL languages including English get language prefix
const getLocalizedPath = (path: string) => {
    return `/${lang}${path}`;
};

const translations = {
    en: {
        description: "Global SMS messaging platform trusted by thousands of businesses worldwide.",
        productTitle: "Product",
        pricing: "Pricing",
        coverage: "Coverage Directory",
        apiDocs: "API Documentation",
        companyTitle: "Company",
        about: "About Us",
        blog: "Blog",
        contact: "Contact",
        legalTitle: "Legal",
        privacy: "Privacy Policy",
        terms: "Terms of Service",
        security: "Security",
        copyright: "2025 SMSPM. All rights reserved.",
    },
    et: {
        description: "Globaalne SMS-sõnumite platvorm, mida usaldavad tuhanded ettevõtted üle maailma.",
        productTitle: "Toode",
        pricing: "Hinnad",
        coverage: "Katvuse kataloog",
        apiDocs: "API dokumentatsioon",
        companyTitle: "Ettevõte",
        about: "Meist",
        blog: "Blogi",
        contact: "Kontakt",
        legalTitle: "Juriidiline",
        privacy: "Privaatsuspoliitika",
        terms: "Kasutustingimused",
        security: "Turvalisus",
        copyright: "2025 SMSPM. Kõik õigused kaitstud.",
    },
    ru: {
        description: "Глобальная платформа SMS-сообщений, которой доверяют тысячи компаний по всему миру.",
        productTitle: "Продукт",
        pricing: "Цены",
        coverage: "Справочник покрытия",
        apiDocs: "Документация API",
        companyTitle: "Компания",
        about: "О нас",
        blog: "Блог",
        contact: "Контакты",
        legalTitle: "Правовая информация",
        privacy: "Политика конфиденциальности",
        terms: "Условия использования",
        security: "Безопасность",
        copyright: "2025 SMSPM. Все права защищены.",
    },
    es: {
        description: "Plataforma global de mensajería SMS de confianza para miles de empresas en todo el mundo.",
        productTitle: "Producto",
        pricing: "Precios",
        coverage: "Directorio de Cobertura",
        apiDocs: "Documentación API",
        companyTitle: "Empresa",
        about: "Acerca de",
        blog: "Blog",
        contact: "Contacto",
        legalTitle: "Legal",
        privacy: "Política de Privacidad",
        terms: "Términos de Servicio",
        security: "Seguridad",
        copyright: "2025 SMSPM. Todos los derechos reservados.",
    },
    de: {
        description: "Globale SMS-Messaging-Plattform, der Tausende von Unternehmen weltweit vertrauen.",
        productTitle: "Produkt",
        pricing: "Preise",
        coverage: "Abdeckungsverzeichnis",
        apiDocs: "API-Dokumentation",
        companyTitle: "Unternehmen",
        about: "Über uns",
        blog: "Blog",
        contact: "Kontakt",
        legalTitle: "Rechtliches",
        privacy: "Datenschutz",
        terms: "Nutzungsbedingungen",
        security: "Sicherheit",
        copyright: "2025 SMSPM. Alle Rechte vorbehalten.",
    },
    fr: {
        description: "Plateforme mondiale de messagerie SMS approuvée par des milliers d'entreprises dans le monde.",
        productTitle: "Produit",
        pricing: "Tarifs",
        coverage: "Répertoire de Couverture",
        apiDocs: "Documentation API",
        companyTitle: "Entreprise",
        about: "À propos",
        blog: "Blog",
        contact: "Contact",
        legalTitle: "Légal",
        privacy: "Politique de Confidentialité",
        terms: "Conditions d'Utilisation",
        security: "Sécurité",
        copyright: "2025 SMSPM. Tous droits réservés.",
    },
    lv: {
        description: "Globāla SMS ziņojumapmaiņas platforma, kurai uzticas tūkstošiem uzņēmumu visā pasaulē.",
        productTitle: "Produkts",
        pricing: "Cenas",
        coverage: "Pārklājuma katalogs",
        apiDocs: "API dokumentācija",
        companyTitle: "Uzņēmums",
        about: "Par mums",
        blog: "Blogs",
        contact: "Kontakti",
        legalTitle: "Juridiskā informācija",
        privacy: "Privātuma politika",
        terms: "Lietošanas noteikumi",
        security: "Drošība",
        copyright: "2025 SMSPM. Visas tiesības aizsargātas.",
    },
    lt: {
        description: "Pasaulinė SMS pranešimų platforma, kuria pasitiki tūkstančiai įmonių visame pasaulyje.",
        productTitle: "Produktas",
        pricing: "Kainos",
        coverage: "Aprėpties katalogas",
        apiDocs: "API dokumentacija",
        companyTitle: "Įmonė",
        about: "Apie mus",
        blog: "Tinklaraštis",
        contact: "Kontaktai",
        legalTitle: "Teisinė informacija",
        privacy: "Privatumo politika",
        terms: "Naudojimo sąlygos",
        security: "Saugumas",
        copyright: "2025 SMSPM. Visos teisės saugomos.",
    },
};

const t = translations[lang] || translations.en;

// URL mapping for localized pricing pages
const pricingUrls: Record<string, string> = {
  'en': 'prices',
  'et': 'sms-hinnad',
  'ru': 'sms-ceny',
  'es': 'precios-sms',
  'de': 'sms-preise',
  'fr': 'prix-sms',
  'lv': 'sms-cenas',
  'lt': 'sms-kainos'
};

// Generate localized links
const pricingLink = `/${lang}/${pricingUrls[lang] || 'prices'}`;
const aboutLink = getLocalizedPath("/about");
const privacyLink = getLocalizedPath("/privacy");
const termsLink = getLocalizedPath("/terms");
const securityLink = getLocalizedPath("/security");
const docsLink = "https://app.smspm.com/docs";
const supportLink = "https://smspm.freshdesk.com/support/tickets/new";
---

<footer class="footer bg-gray-900 text-gray-400 py-16 pt-20">
    <div class="container mx-auto px-8">
        <div class="footer-content grid grid-cols-1 md:grid-cols-5 gap-8 mb-12">
            <div class="footer-column md:col-span-2">
                <div class="footer-logo mb-4">
                    <img
                        src="/logo.png"
                        alt="SMSPM Logo"
                        class="footer-logo-img h-9 w-auto"
                        width="300"
                        height="97"
                    />
                </div>
                <p
                    class="footer-description text-[15px] leading-relaxed mb-6 max-w-[300px]"
                >
                    {t.description}
                </p>
                <div class="social-links flex gap-4">
                    <a
                        href="#"
                        class="social-link w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center hover:bg-cyan hover:text-white transition-all duration-150"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            ><path
                                d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"
                            ></path></svg
                        >
                    </a>
                    <a
                        href="#"
                        class="social-link w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center hover:bg-cyan hover:text-white transition-all duration-150"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            ><path
                                d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6zM2 9h4v12H2z"
                            ></path><circle cx="4" cy="4" r="2"></circle></svg
                        >
                    </a>
                </div>
            </div>

            <div class="footer-column">
                <h4
                    class="footer-title text-white font-semibold mb-4 text-[15px]"
                >
                    {t.productTitle}
                </h4>
                <ul class="footer-links space-y-3 text-[14px]">
                    <li>
                        <a
                            href={pricingLink}
                            class="hover:text-cyan transition-colors duration-150 font-semibold text-cyan/90"
                            >{t.pricing}</a
                        >
                    </li>
                    <li>
                        <a
                            href={pricingLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.coverage}</a
                        >
                    </li>
                    <li>
                        <a
                            href={docsLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.apiDocs}</a
                        >
                    </li>
                </ul>
            </div>

            <div class="footer-column">
                <h4
                    class="footer-title text-white font-semibold mb-4 text-[15px]"
                >
                    {t.companyTitle}
                </h4>
                <ul class="footer-links space-y-3 text-[14px]">
                    <li>
                        <a
                            href={aboutLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.about}</a
                        >
                    </li>
                    <li>
                        <a
                            href="#blog"
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.blog}</a
                        >
                    </li>
                    <li>
                        <a
                            href={supportLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.contact}</a
                        >
                    </li>
                </ul>
            </div>

            <div class="footer-column">
                <h4
                    class="footer-title text-white font-semibold mb-4 text-[15px]"
                >
                    {t.legalTitle}
                </h4>
                <ul class="footer-links space-y-3 text-[14px]">
                    <li>
                        <a
                            href={privacyLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.privacy}</a
                        >
                    </li>
                    <li>
                        <a
                            href={termsLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.terms}</a
                        >
                    </li>
                    <li>
                        <a
                            href={securityLink}
                            class="hover:text-cyan transition-colors duration-150"
                            >{t.security}</a
                        >
                    </li>
                </ul>
            </div>
        </div>

        <div
            class="footer-bottom border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center text-sm"
        >
            <p>&copy; {t.copyright}</p>
            <div class="footer-badges flex gap-4 mt-4 md:mt-0"></div>
        </div>
    </div>
</footer>
