---
import type { CountryData } from "../../utils/kv-pricing";

export interface Props {
  country: CountryData;
}

const { country } = Astro.props;
const startingPrice =
  country.providers.length > 0
    ? Math.min(...country.providers.map((p) => p.price))
    : 0;
---

<!-- Hero Section -->
<section class="hero relative pt-[140px] pb-20 overflow-hidden">
  <div class="hero-gradient-bg absolute top-0 left-0 right-0 bottom-0 -z-10">
  </div>

  <div class="container mx-auto px-8">
    <div
      class="hero-content grid grid-cols-1 lg:grid-cols-5 gap-12 items-center"
    >
      <div class="hero-text lg:col-span-3">
        <!-- Breadcrumbs -->
        <nav class="flex mb-8 text-sm" aria-label="Breadcrumb">
          <ol class="flex items-center space-x-2 text-dynamic-tertiary">
            <li>
              <a href="/" class="hover:text-cyan transition-colors">Home</a>
            </li>
            <li>
              <svg
                width="12"
                height="12"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M7 3L15 10L7 17"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </li>
            <li>
              <a href="/en/countries" class="hover:text-cyan transition-colors"
                >Countries</a
              >
            </li>
            <li>
              <svg
                width="12"
                height="12"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M7 3L15 10L7 17"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </li>
            <li class="text-cyan font-medium" aria-current="page">
              {country.name}
            </li>
          </ol>
        </nav>

        <div
          class="hero-badge inline-flex items-center gap-2 px-6 py-2 bg-cyan/10 border border-cyan/30 rounded-full text-sm text-cyan font-medium mb-8"
        >
          <span
            class="badge-dot w-2 h-2 bg-gradient-1 rounded-full animate-pulse-slow"
          ></span>
          Direct carrier connections in {country.name}
        </div>

        <h1
          class="hero-title text-4xl lg:text-6xl font-extrabold leading-tight mb-6 tracking-tight text-dynamic-primary"
        >
          Send SMS to
          <span class="gradient-text block">{country.name}</span>
        </h1>

        <p
          class="hero-subtitle text-xl text-dynamic-secondary leading-relaxed mb-8 max-w-[640px]"
        >
          Connect with <span class="gradient-text">{country.mobileUsers}</span> mobile
          users through direct carrier connections. Experience <span
            class="gradient-text"
            >{country.stats.deliveryRate} delivery rates</span
          > with pricing from
          <span class="gradient-text"
            >{
              country.currency === "EUR"
                ? "â‚¬"
                : country.currency === "GBP"
                  ? "Â£"
                  : "$"
            }{startingPrice.toFixed(3)}</span
          > per message.
        </p>

        <div class="hero-actions flex flex-col sm:flex-row gap-4 mb-8">
          <a
            href="https://app.smspm.com/app/register"
            class="btn btn-primary btn-large"
          >
            Start Free Trial
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path
                d="M7 3L15 10L7 17"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </a>
          <a
            href="https://app.smspm.com/docs"
            class="btn btn-secondary btn-large"
          >
            View API Docs
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path
                d="M3 7H21L19 12L21 17H3L5 12L3 7Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </a>
        </div>

        <div class="hero-stats flex flex-wrap gap-12">
          <div class="stat-item">
            <div
              class="stat-value text-3xl lg:text-5xl font-extrabold gradient-text"
            >
              {country.stats.deliveryRate}
            </div>
            <div
              class="stat-label text-sm text-dynamic-tertiary uppercase tracking-wider mt-1"
            >
              Delivery Rate
            </div>
          </div>
          <div class="stat-item">
            <div
              class="stat-value text-3xl lg:text-5xl font-extrabold gradient-text"
            >
              {country.stats.responseTime}
            </div>
            <div
              class="stat-label text-sm text-dynamic-tertiary uppercase tracking-wider mt-1"
            >
              Response Time
            </div>
          </div>
        </div>
      </div>

      <div
        class="hero-visual relative h-[600px] lg:col-span-2 hidden lg:flex items-center justify-center"
      >
        <!-- Premium Flag Orb Portal -->
        <div
          class="flag-orb-container relative w-full h-full flex items-center justify-center"
        >
          <!-- Enhanced Halo/Rings -->
          <div
            class="absolute w-[380px] h-[380px] border-2 border-cyan/20 rounded-full animate-pulse-slow shadow-[0_0_30px_rgba(38,198,218,0.1)]"
          >
          </div>
          <div
            class="absolute w-[480px] h-[480px] border border-cyan/10 rounded-full animate-float shadow-[0_0_50px_rgba(38,198,218,0.05)]"
            style="animation-duration: 10s;"
          >
          </div>
          <div
            class="absolute w-[320px] h-[320px] bg-cyan/5 rounded-full blur-3xl z-0"
          >
          </div>

          <!-- The Orb -->
          <div
            class="relative w-80 h-80 rounded-full overflow-hidden shadow-[0_0_80px_rgba(38,198,218,0.3)] border-2 border-white/20 z-10 transition-transform duration-700 hover:scale-105"
          >
            <img
              src={`https://hatscripts.github.io/circle-flags/flags/${country.code.toLowerCase()}.svg`}
              alt={`${country.name} Flag`}
              class="w-full h-full object-cover scale-110"
              loading="lazy"
            />
            <!-- Glass Overlay -->
            <div
              class="absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-black/10"
            >
            </div>
          </div>

          <!-- Floating Info Cards Staggered in Depth -->
          <div
            class="floating-card absolute top-12 -left-4 w-[200px] bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border border-white/20 rounded-2xl p-4 shadow-[0_20px_50px_rgba(0,0,0,0.1)] z-20 animate-float"
          >
            <div class="card-header flex justify-between items-center mb-3">
              <div class="flex items-center gap-2">
                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"
                ></span>
                <span
                  class="text-[10px] font-bold uppercase tracking-widest text-green-500"
                  >Connected</span
                >
              </div>
              <span class="card-icon text-lg">ðŸ“±</span>
            </div>
            <p class="text-[15px] font-bold text-dynamic-primary">
              {country.mobileUsers} Users
            </p>
            <p
              class="text-[10px] text-dynamic-tertiary uppercase tracking-tight"
            >
              {country.name} National Network
            </p>
          </div>

          <div
            class="floating-card absolute bottom-12 -right-4 w-[220px] bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border border-white/20 rounded-2xl p-4 shadow-[0_20px_50px_rgba(0,0,0,0.1)] z-20 animate-float"
            style="animation-delay: 2s;"
          >
            <div class="card-header flex justify-between items-center mb-3">
              <div class="flex items-center gap-2">
                <span class="w-2 h-2 bg-cyan rounded-full animate-pulse"></span>
                <span
                  class="text-[10px] font-bold uppercase tracking-widest text-cyan"
                  >Live Sync</span
                >
              </div>
              <span class="card-icon text-lg">âš¡</span>
            </div>
            <p class="text-[15px] font-bold text-dynamic-primary">
              Direct Routing
            </p>
            <p
              class="text-[10px] text-dynamic-tertiary uppercase tracking-tight"
            >
              {country.stats.responseTime} Average latency
            </p>
          </div>

          <div
            class="floating-card absolute top-1/2 -right-8 transform -translate-y-1/2 w-[140px] bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border border-white/20 rounded-2xl p-4 shadow-[0_20px_50px_rgba(0,0,0,0.1)] z-20 animate-float"
            style="animation-delay: 4s;"
          >
            <div class="chart-header flex justify-between items-center mb-3">
              <span
                class="text-[10px] font-bold uppercase tracking-widest text-dynamic-tertiary"
                >Reliability</span
              >
            </div>
            <div class="chart-bars flex items-end gap-1.5 h-[40px]">
              <div class="flex-1 rounded-sm bg-cyan/20" style="height: 40%;">
              </div>
              <div class="flex-1 rounded-sm bg-cyan/40" style="height: 60%;">
              </div>
              <div class="flex-1 rounded-sm bg-cyan/60" style="height: 50%;">
              </div>
              <div class="flex-1 rounded-sm bg-cyan" style="height: 90%;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .hero-gradient-bg {
    background:
      radial-gradient(
        circle at 15% 15%,
        rgba(38, 198, 218, 0.1) 0%,
        transparent 40%
      ),
      radial-gradient(
        circle at 85% 85%,
        rgba(13, 71, 161, 0.1) 0%,
        transparent 40%
      );
  }

  [data-theme="dark"] .hero-gradient-bg {
    background:
      radial-gradient(
        circle at 15% 15%,
        rgba(38, 198, 218, 0.2) 0%,
        transparent 40%
      ),
      radial-gradient(
        circle at 85% 85%,
        rgba(13, 71, 161, 0.2) 0%,
        transparent 40%
      );
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  .gradient-text {
    background: linear-gradient(135deg, #26c6da 0%, #0d47a1 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
