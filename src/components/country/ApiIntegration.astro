---
import type { CountryData } from '../../utils/kv-pricing';

export interface Props {
  country: CountryData;
}

const { country } = Astro.props;

// Generate country-specific example
const phoneExample = country.code === 'ee' ? '+372XXXXXXXX' : 
                    country.code === 'gb' ? '+44XXXXXXXXX' :
                    country.code === 'de' ? '+49XXXXXXXXX' :
                    country.code === 'fr' ? '+33XXXXXXXXX' :
                    country.code === 'es' ? '+34XXXXXXXXX' :
                    `${country.callingCode}XXXXXXXX`;

const messageExample = country.code === 'ee' ? 'Tere! Your verification code is 123456.' :
                      country.code === 'de' ? 'Hallo! Ihr Bestätigungscode lautet 123456.' :
                      country.code === 'fr' ? 'Bonjour! Votre code de vérification est 123456.' :
                      country.code === 'es' ? 'Hola! Su código de verificación es 123456.' :
                      'Hello! Your verification code is 123456.';
---

<!-- Integration Section -->
<section class="integration-section py-16 lg:py-24">
  <div class="container mx-auto px-8">
    <div class="text-center mb-16">
      <span class="section-badge inline-flex px-6 py-2 bg-cyan/10 border border-cyan/30 rounded-full text-sm text-cyan font-semibold mb-6">Developer Friendly</span>
      <h2 class="text-3xl lg:text-5xl font-extrabold mb-4 text-dynamic-primary">
        <span class="gradient-text">Easy Integration</span>
      </h2>
      <p class="text-lg text-dynamic-secondary max-w-2xl mx-auto">
        Connect with our API and start <span class="gradient-text">sending SMS to {country.name}</span> in minutes
      </p>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto">
      <div class="code-example rounded-2xl overflow-hidden shadow-2xl border-dynamic-primary">
        <div class="code-header flex justify-between items-center px-6 py-4 bg-dynamic-secondary border-b border-dynamic-primary">
          <div class="code-tabs flex gap-2">
            <button class="code-tab px-4 py-2 text-sm font-medium rounded-lg transition-all duration-150 active bg-dynamic-tertiary text-dynamic-primary" data-lang="javascript">JavaScript</button>
            <button class="code-tab px-4 py-2 text-sm font-medium rounded-lg transition-all duration-150 text-dynamic-tertiary hover:text-dynamic-primary hover:bg-dynamic-tertiary" data-lang="python">Python</button>
            <button class="code-tab px-4 py-2 text-sm font-medium rounded-lg transition-all duration-150 text-dynamic-tertiary hover:text-dynamic-primary hover:bg-dynamic-tertiary" data-lang="php">PHP</button>
          </div>
          <button class="code-copy flex items-center gap-2 px-4 py-2 border border-dynamic-primary text-dynamic-tertiary text-sm rounded-lg cursor-pointer transition-all duration-150 hover:border-cyan hover:text-cyan">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="7" y="7" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.5"/>
              <path d="M4 13H3C2.44772 13 2 12.5523 2 12V3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V4" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Copy
          </button>
        </div>
        <div class="code-body p-6 bg-dynamic-primary">
          <!-- JavaScript Code -->
          <div class="code-content" data-lang="javascript">
            <pre><code class="language-javascript text-dynamic-secondary font-mono text-sm leading-loose">// Send SMS to {country.name}
const response = await fetch('https://api.smspm.com/v1/send', &#123;
  method: 'POST',
  headers: &#123;
    'Content-Type': 'application/json',
    'Authorization': 'Bearer YOUR_API_KEY'
  &#125;,
  body: JSON.stringify(&#123;
    to: '{phoneExample}',
    message: '{messageExample}',
    sender: 'YourBrand'
  &#125;)
&#125;);

const result = await response.json();
console.log('Message sent:', result.messageId);</code></pre>
          </div>
          
          <!-- Python Code -->
          <div class="code-content hidden" data-lang="python">
            <pre><code class="language-python text-dynamic-secondary font-mono text-sm leading-loose">import requests

# Send SMS to {country.name}
response = requests.post('https://api.smspm.com/v1/send', 
    headers=&#123;
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR_API_KEY'
    &#125;,
    json=&#123;
        'to': '{phoneExample}',
        'message': '{messageExample}',
        'sender': 'YourBrand'
    &#125;
)

result = response.json()
print(f"Message sent: &#123;result['messageId']&#125;")</code></pre>
          </div>
          
          <!-- PHP Code -->
          <div class="code-content hidden" data-lang="php">
            <pre><code class="language-php text-dynamic-secondary font-mono text-sm leading-loose">&lt;?php
// Send SMS to {country.name}
$data = [
    'to' => '{phoneExample}',
    'message' => '{messageExample}',
    'sender' => 'YourBrand'
];

$ch = curl_init('https://api.smspm.com/v1/send');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'Authorization: Bearer YOUR_API_KEY'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($ch);
$response = json_decode($result, true);
echo "Message sent: " . $response['messageId'];</code></pre>
          </div>
        </div>
      </div>
      
      <div class="integration-features">
        <h3 class="text-2xl font-bold text-dynamic-primary mb-8">Features</h3>
        
        <div class="space-y-6 mb-8">
          <div class="feature-item flex items-start gap-4">
            <div class="w-8 h-8 bg-gradient-to-br from-cyan to-blue rounded-lg flex items-center justify-center flex-shrink-0">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="text-white">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-dynamic-primary mb-1">REST API</h4>
              <p class="text-sm text-dynamic-secondary">Simple HTTP-based API that works with any programming language</p>
            </div>
          </div>
          
          <div class="feature-item flex items-start gap-4">
            <div class="w-8 h-8 bg-gradient-to-br from-blue to-purple rounded-lg flex items-center justify-center flex-shrink-0">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="text-white">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-dynamic-primary mb-1">{country.name} Language Support</h4>
              <p class="text-sm text-dynamic-secondary">Full Unicode support for local characters and languages</p>
            </div>
          </div>
          
          <div class="feature-item flex items-start gap-4">
            <div class="w-8 h-8 bg-gradient-to-br from-purple to-pink rounded-lg flex items-center justify-center flex-shrink-0">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="text-white">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-dynamic-primary mb-1">Real-time Delivery Reports</h4>
              <p class="text-sm text-dynamic-secondary">Track message delivery status with detailed analytics</p>
            </div>
          </div>
          
          <div class="feature-item flex items-start gap-4">
            <div class="w-8 h-8 bg-gradient-to-br from-cyan to-purple rounded-lg flex items-center justify-center flex-shrink-0">
              <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor" class="text-white">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div>
              <h4 class="font-semibold text-dynamic-primary mb-1">Webhook Notifications</h4>
              <p class="text-sm text-dynamic-secondary">Receive real-time updates on message status changes</p>
            </div>
          </div>
        </div>
        
        <a href="/api-docs" class="btn btn-primary">
          View API Documentation
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M7 3L15 10L7 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>