---
import type { CountryData } from "../../utils/kv-pricing";

export interface Props {
  country: CountryData;
  lang?: string;
}

const { country, lang: propLang } = Astro.props;
const { pathname } = Astro.url;

const langMatch = pathname.match(/^\/([a-z]{2})(\/|$)/);
const detectedFromPath = langMatch ? langMatch[1] : null;
const lang = (propLang || detectedFromPath || "en") as keyof typeof translations;

const translations = {
  en: {
    badge: "Use Cases",
    title: "Popular Use Cases in",
    subtitle: "How businesses use SMS to",
    connectWithCustomers: "connect with customers",
    in: "in",
    startBuilding: "Start Building Your SMS Campaign",
  },
  et: {
    badge: "Kasutusjuhud",
    title: "Populaarsed kasutusjuhud riigis",
    subtitle: "Kuidas ettevõtted kasutavad SMS-e",
    connectWithCustomers: "klientidega suhtlemiseks",
    in: "riigis",
    startBuilding: "Alusta oma SMS-kampaania loomist",
  },
  ru: {
    badge: "Варианты использования",
    title: "Популярные варианты использования в",
    subtitle: "Как компании используют SMS для",
    connectWithCustomers: "связи с клиентами",
    in: "в",
    startBuilding: "Начните создавать свою SMS-кампанию",
  },
  es: {
    badge: "Casos de Uso",
    title: "Casos de Uso Populares en",
    subtitle: "Cómo las empresas usan SMS para",
    connectWithCustomers: "conectar con clientes",
    in: "en",
    startBuilding: "Comienza a Crear tu Campaña SMS",
  },
  de: {
    badge: "Anwendungsfälle",
    title: "Beliebte Anwendungsfälle in",
    subtitle: "Wie Unternehmen SMS nutzen, um",
    connectWithCustomers: "mit Kunden zu kommunizieren",
    in: "in",
    startBuilding: "Starten Sie Ihre SMS-Kampagne",
  },
  fr: {
    badge: "Cas d'Usage",
    title: "Cas d'Usage Populaires en",
    subtitle: "Comment les entreprises utilisent les SMS pour",
    connectWithCustomers: "se connecter avec les clients",
    in: "en",
    startBuilding: "Commencez à Créer votre Campagne SMS",
  },
  lv: {
    badge: "Lietošanas gadījumi",
    title: "Populāri lietošanas gadījumi",
    subtitle: "Kā uzņēmumi izmanto SMS, lai",
    connectWithCustomers: "sazinātos ar klientiem",
    in: "valstī",
    startBuilding: "Sāciet veidot savu SMS kampaņu",
  },
  lt: {
    badge: "Naudojimo atvejai",
    title: "Populiarūs naudojimo atvejai",
    subtitle: "Kaip įmonės naudoja SMS, kad",
    connectWithCustomers: "bendrauti su klientais",
    in: "šalyje",
    startBuilding: "Pradėkite kurti savo SMS kampaniją",
  },
};

const t = translations[lang] || translations.en;
---

<!-- Use Cases Section -->
<section class="use-cases py-16 lg:py-24">
  <div class="container mx-auto px-8">
    <div class="text-center mb-16">
      <span
        class="section-badge inline-flex px-6 py-2 bg-cyan/10 border border-cyan/30 rounded-full text-sm text-cyan font-semibold mb-6"
        >{t.badge}</span
      >
      <h2 class="text-3xl lg:text-5xl font-extrabold mb-4 text-dynamic-primary">
        {t.title} <span class="gradient-text">{country.name}</span>
      </h2>
      <p class="text-lg text-dynamic-secondary max-w-2xl mx-auto">
        {t.subtitle} <span class="gradient-text"
          >{t.connectWithCustomers}</span
        > {t.in} {country.name}
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {
        country.useCases.map((useCase) => (
          <div class="use-case-card bg-dynamic-primary border border-dynamic-primary rounded-2xl p-8 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
            <div class="use-case-icon w-16 h-16 bg-gradient-to-br from-cyan to-blue rounded-xl mx-auto mb-6 flex items-center justify-center text-white text-2xl">
              <i class={useCase.icon} />
            </div>

            <h3 class="text-xl font-bold text-dynamic-primary mb-4 text-center">
              {useCase.title}
            </h3>

            <p class="text-dynamic-secondary mb-6 text-center">
              {useCase.description}
            </p>

            <ul class="space-y-2">
              {useCase.examples.map((example) => (
                <li class="flex items-center gap-3 text-sm text-dynamic-secondary">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="text-green-500 flex-shrink-0"
                  >
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>{example}</span>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>

    <div class="mt-16 text-center">
      <a
        href="https://app.smspm.com/app/register"
        class="btn btn-primary btn-large"
      >
        {t.startBuilding}
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path
            d="M7 3L15 10L7 17"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .gradient-text {
    background: linear-gradient(135deg, #26c6da 0%, #0d47a1 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>
